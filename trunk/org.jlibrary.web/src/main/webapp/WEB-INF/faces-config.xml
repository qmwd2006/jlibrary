<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE faces-config PUBLIC
    "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.1//EN"
    "http://java.sun.com/dtd/web-facesconfig_1_1.dtd">

<faces-config>
	<application>
    	<view-handler>
      	com.sun.facelets.FaceletViewHandler
    	</view-handler>    
  	</application>
	<managed-bean>
		<managed-bean-name>loginManager</managed-bean-name>
		<managed-bean-class>org.jlibrary.web.admin.login.LoginManager</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
		<managed-property>
	        <property-name>repositoryName</property-name>
	        <value>#{param.repository}</value>
    	</managed-property>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>categoriesManager</managed-bean-name>
		<managed-bean-class>org.jlibrary.web.admin.categories.CategoriesManager</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
		<managed-property>
	        <property-name>repositoryName</property-name>
	        <value>#{param.repository}</value>
    	</managed-property>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>documentsManager</managed-bean-name>
		<managed-bean-class>org.jlibrary.web.admin.content.DocumentsManager</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
		<managed-property>
	        <property-name>repositoryName</property-name>
	        <value>#{param.repository}</value>
    	</managed-property>
	</managed-bean>
	
	<navigation-rule>
		<from-view-id>/login.jsp</from-view-id>
		<navigation-case>
			<from-outcome>login$ko</from-outcome>
			<to-view-id>/login.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>login$ok</from-outcome>
			<to-view-id>/admin/home.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	
	<navigation-rule>
		<from-view-id>/admin/home.jsp</from-view-id>
		<navigation-case>
			<from-outcome>content$list</from-outcome>
			<to-view-id>/admin/content/list.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>categories$list</from-outcome>
			<to-view-id>/admin/categories/list.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>	
	
	<navigation-rule>
		<from-view-id>/admin/categories/list.jsp</from-view-id>
		<navigation-case>
			<from-outcome>categories$form</from-outcome>
			<to-view-id>/admin/categories/form.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>categories$list</from-outcome>
			<to-view-id>/admin/categories/list.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>categories$deleted</from-outcome>
			<to-view-id>/admin/categories/list.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	<navigation-rule>
		<from-view-id>/admin/categories/form.jsp</from-view-id>
		<navigation-case>
			<from-outcome>categories$saved</from-outcome>
			<to-view-id>/admin/categories/list.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>categories$back</from-outcome>
			<to-view-id>/admin/categories/list.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	<navigation-rule>
		<from-view-id>/admin/content/list.jsp</from-view-id>
		<navigation-case>
			<from-outcome>directory$details</from-outcome>
			<to-view-id>/admin/content/directory_form.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>document$details</from-outcome>
			<to-view-id>/admin/content/document_form.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>document$upload</from-outcome>
			<to-view-id>/admin/content/upload.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>content$delete</from-outcome>
			<to-view-id>/admin/content/list.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	<navigation-rule>
		<from-view-id>/admin/content/directory_form.jsp</from-view-id>
		<navigation-case>
			<from-outcome>content$saved</from-outcome>
			<to-view-id>/admin/content/list.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>content$back</from-outcome>
			<to-view-id>/admin/content/list.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	<navigation-rule>
	  <from-view-id>/admin/content/upload.jsp</from-view-id>
	  <navigation-case>
			<from-outcome>document$details</from-outcome>
			<to-view-id>/admin/content/document_form.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	<navigation-rule>
		<from-view-id>/admin/content/document_form.jsp</from-view-id>
		<navigation-case>
			<from-outcome>content$saved</from-outcome>
			<to-view-id>/admin/content/list.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>content$back</from-outcome>
			<to-view-id>/admin/content/list.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	<navigation-rule>
		<from-view-id>/admin/content/comments.jsp</from-view-id>
		<navigation-case>
			<from-outcome>content$ok</from-outcome>
			<to-view-id>#{documentsManager.requestURL}</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>content$back</from-outcome>
			<to-view-id>/admin/content/list.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>	
</faces-config>